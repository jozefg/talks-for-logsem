\documentclass[usenames,dvipsnames,aspectratio=169,12pt]{beamer}
\usepackage{tikz}
\usetikzlibrary{tikzmark,positioning}
\usepackage[customcolors]{hf-tikz}
\usepackage{natbib}
\usepackage{bibentry}
\usepackage{microtype, times}
\usepackage{amsmath, amssymb, mathpartir, stmaryrd}
\usepackage{wasysym}
\usepackage{textcomp}
\usepackage[normalem]{ulem}
\usepackage{listings}
\usepackage{color}
\usepackage{xparse}

\NewDocumentCommand{\Arr}{m m}{#1 \to #2}
\NewDocumentCommand{\Fun}{m m}{\mathsf{fun}\, #1 \Rightarrow #2}
\NewDocumentCommand{\App}{m m}{#1(#2)}
\NewDocumentCommand{\Nat}{}{\mathsf{Nat}}
\NewDocumentCommand{\Zero}{}{\mathsf{zero}}
\NewDocumentCommand{\Succ}{m}{\mathsf{succ}(#1)}
\NewDocumentCommand{\Vect}{m m}{\mathsf{Vec}(#1, #2)}
\NewDocumentCommand{\Nil}{}{\mathsf{nil}}
\NewDocumentCommand{\Cons}{m m}{#1 {:} #2}
\NewDocumentCommand{\Lang}{m}{\mathsf{#1}}

\NewDocumentCommand{\Nf}{m m}{\llbracket #1 : #2 \rrbracket}

\usefonttheme[onlymath]{serif}
\definecolor{JadeGreen}{RGB}{0,168,107}
\definecolor{MunsellPurple}{RGB}{159,0,197}
\definecolor{LightGrey}{gray}{0.9}
\definecolor{CobaltBlue}{RGB}{0,71,171}
\definecolor{FireBrick}{RGB}{228,34,23}
\definecolor{Alabaster}{RGB}{250,250,250}

\hfsetfillcolor{blue!15}
\hfsetbordercolor{blue!15}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}{%
  \raisebox{7pt}{\makebox[\paperwidth]{\hfill\makebox[10pt]{\scriptsize\insertframenumber}\quad}}}
\setbeamertemplate{headline}{}
\setbeamercolor{example text}{fg=CobaltBlue}
\setbeamertemplate{itemize items}{$\bullet$}

\title{Implementing a Modal Dependent Type Theory}
\author{\textbf{Daniel Gratzer}\inst{1}\\%
  Jonathan Sterling\inst{2} \and Lars Birkedal\inst{1}}
\institute{\inst{1} This University \smiley{} \\ \inst{2} Not This University \frownie{}}
\date{May 24 2019}

\begin{document}
\begin{frame}[noframenumbering]
  \titlepage
\end{frame}

\begin{frame}
  \frametitle{Hello!}
  First things first, the title of this talk is a lie.
  \pause

  \begin{itemize}
  \item I don't want to talk about \emph{modal} dependent type theory.
  \item I'd like to talk about the core idea behind this work.
  \end{itemize}
  \pause
  \bigskip

  An alternative title:
  \begin{center}
    \color{Blue}
    \Large
    Implementing type theory
  \end{center}

\end{frame}

\begin{frame}
  \frametitle{Setting the Scene}

  What is type theory? Type theory is a....
  \only<1>{\setbeamercolor{itemize item}{fg=red}}
  \begin{itemize}
  \item well-behaved programming language with a rich type system.
    \only<1>{\setbeamercolor{itemize item}{fg=CobaltBlue}}
    \only<2>{\setbeamercolor{itemize item}{fg=red}}

  \item framework for reasoning about mathematical objects.
    \only<2>{\setbeamercolor{itemize item}{fg=CobaltBlue}}
    \only<3>{\setbeamercolor{itemize item}{fg=red}}

  \item foundation for mathematics.
  \end{itemize}
  \pause\pause\pause
  \bigskip


  Each viewpoint induces requirements on a good type theory.
\end{frame}

\begin{frame}
  \frametitle{The Fundamental Tension}

  We want a type theory which is suitable for

  \begin{center}
    \textcolor{Red}{studying mathematics}
  \end{center}

  but at the same time still serves as setting for

  \begin{center}
    \textcolor{Blue}{programming}
  \end{center}

\end{frame}

\begin{frame}
  \frametitle{A Concrete Issue}
  Set aside the questions of \textcolor{Red}{mathematics} and \textcolor{Blue}{programming} for a
  second.
  \bigskip

  Type theory has functions
  \[
    \App{M\tikzmark{fun}}{N\tikzmark{arg}}
  \]
  \onslide<1>{When is this application well-typed?}
  \begin{tikzpicture}[
    remember picture,
    overlay,
    expl/.style={draw=orange,fill=orange!30,rounded corners,text width=3cm},
    arrow/.style={red!80!black,ultra thick,->,>=latex}
    ]
    \node<2->[expl]
    (funex)
    at (-4,-1cm)
    {must have type $\Arr{A}{B}$};
    \node<3->[expl]
    (argex)
    at (4,-1cm)
    {must have type $C$};
    \node<4->
    at (0, -2.5cm)
    {\textbf{We must also have $A = C$!}};
    \draw<2->[arrow]
    (funex) to ([xshift=-1ex,yshift=-0.5ex]{pic cs:fun});
    \draw<3->[arrow]
    (argex) to ([xshift=0ex,yshift=-0.5ex]{pic cs:arg});
  \end{tikzpicture}
\end{frame}

\begin{frame}
  \frametitle{Type-checking and Decidability}
  What should we take away from this example?
  \begin{enumerate}
  \item Type-checking entails deciding the equality of types.
  \item If we want an implementation, type equality must be decidable.
  \end{enumerate}
\end{frame}

\begin{frame}
  \frametitle{Just type equality?}
  Deciding type equality is always a problem but we have fancier types:
  \[
    \Vect{A}{M} \qquad\quad\qquad\quad\text{A list of $A$s of length $M$}
  \]
  \pause
  We don't just need type equality... we need term equality too!
\end{frame}

\begin{frame}
  \frametitle{The mess we're in}
  In order to implement type theory we must decide the equality of terms.
  \begin{enumerate}
  \item So this is completely impossible in a Turing-complete language.
  \item Actually it's impossible in many Turing-\emph{incomplete} languages as well.
  \item Many equalities we expect mathematical are impossible to decide:
    \[
      f = g \iff \text{for all } x.\ \App{f}{x} = \App{g}{x}
    \]
  \end{enumerate}
\end{frame}

\begin{frame}
  \frametitle{Modern Type Theory}
  The central balancing act is then defining an equality relation which is
  \begin{itemize}
  \item sufficiently strong to match our \textcolor{Red}{mathematical} intuitions.
  \item decidable so that we can \textcolor{Blue}{implement} it.
  \end{itemize}
  \bigskip

  Our work focused on experimenting with this balance for \emph{modal type theory}.
\end{frame}

\begin{frame}
  \frametitle{My Only Technical Slide, Promise}

  The way that we prove decidability of equality is normalization.
  \begin{theorem}[Normalization]
    There exists a function $\Nf{M}{A}$ satisfying the following properties:
    \begin{itemize}
    \item $\Nf{M}{A}$ is identical to $\Nf{N}{A}$ if $M = N : A$
    \item $\Nf{M}{A} = M : A$
    \item $\Nf{\Nf{M}{A}}{A}$ is identical to $\Nf{M}{A}$
    \end{itemize}
  \end{theorem}
\end{frame}

\begin{frame}
  \frametitle{Conclusions (some of the stuff I skipped)}
  I cut out a lot of cool stuff in this talk:
  \begin{itemize}
  \item Using type theory, we can ``run'' proofs math.
  \item We can use computer science to explore mathematics.
  \item We can use maths to inspire better PLs.
  \item Many, many, many unexplored and interesting questions remain.
  \end{itemize}
\end{frame}
\end{document}
